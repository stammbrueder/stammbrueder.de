---
import { Picture } from 'astro:assets';
import { getImage } from '../utils/imageMap';
import { imageWidthsStandard, imageSizesStandard, imageFormats, imageQuality } from '../utils/imageConfig';

export interface Props {
  title: string;
  description: string;
  image: string;
  imageAlt: string;
  href: string;
  category?: string;
}

const { title, description, image, imageAlt, href, category } = Astro.props;

// Verwende zentrales Image-Mapping - immer Astro Picture-Komponente
const imageSrc = getImage(image);
---

<a href={href} class="card fade-in">
  <Picture 
    src={imageSrc}
    alt={imageAlt}
    class="card__image"
    widths={imageWidthsStandard}
    sizes={imageSizesStandard}
    formats={imageFormats}
    loading="lazy"
    quality={imageQuality}
  />
  <div class="card__content">
    {category && <span class="category">{category}</span>}
    <h3 class="card__title">{title}</h3>
    <p class="card__text">{description}</p>
    <span class="card-link">Mehr erfahren â†’</span>
  </div>
</a>
